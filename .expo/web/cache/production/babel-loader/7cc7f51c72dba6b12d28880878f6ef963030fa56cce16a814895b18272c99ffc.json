{"ast":null,"code":"import React from'react';import Animated from\"react-native-web/dist/exports/Animated\";import Dimensions from\"react-native-web/dist/exports/Dimensions\";import{useLogger,useGesture}from'../contexts';import{usePanResponder,useSlideAnimation,useViewDimensions}from'../hooks';import{noop}from'../utils/func';import{bound}from'../utils/number';import{getTestId}from'../utils/test-id';import{styles}from'./AnimatedContainer.styles';import{jsx as _jsx}from\"react/jsx-runtime\";export function dampingFor(gesture,position){const{moveY}=gesture;switch(position){case'bottom':{const{height:screenHeight}=Dimensions.get('screen');return Math.abs(screenHeight-moveY);}case'top':return Math.abs(moveY);default:throw new Error(`Toast position: ${position} not implemented`);}}export function animatedValueFor(gesture,position,damping){const boundValue=val=>bound(val,0,2);const{dy}=gesture;switch(position){case'bottom':return boundValue(1-dy/damping);case'top':return boundValue(1+dy/damping);default:throw new Error(`Toast position: ${position} not implemented`);}}export function AnimatedContainer({children,isVisible,position,topOffset,bottomOffset,keyboardOffset,avoidKeyboard,onHide,onRestorePosition=noop,swipeable}){const{log}=useLogger();const{panning}=useGesture();const{computeViewDimensions,height}=useViewDimensions();const{animatedValue,animate,animationStyles}=useSlideAnimation({position,height,topOffset,bottomOffset,keyboardOffset,avoidKeyboard});const disable=!swipeable||!isVisible;const onStart=React.useCallback(()=>{log('Swipe, pan start');panning.current=true;},[log,panning]);const onEnd=React.useCallback(()=>{log('Swipe, pan end');panning.current=false;},[log,panning]);const onDismiss=React.useCallback(()=>{log('Swipe, dismissing');animate(0);onHide();},[animate,log,onHide]);const onRestore=React.useCallback(()=>{log('Swipe, restoring to original position');animate(1);onRestorePosition();},[animate,log,onRestorePosition]);const computeNewAnimatedValueForGesture=React.useCallback(gesture=>{const damping=dampingFor(gesture,position);const newAnimatedValue=animatedValueFor(gesture,position,damping);return newAnimatedValue;},[position]);const{panResponder}=usePanResponder({animatedValue,computeNewAnimatedValueForGesture,onDismiss,onRestore,onStart,onEnd,disable});React.useLayoutEffect(()=>{const newAnimationValue=isVisible?1:0;animate(newAnimationValue);},[animate,isVisible]);return _jsx(Animated.View,Object.assign({testID:getTestId('AnimatedContainer'),onLayout:computeViewDimensions,style:[styles.base,styles[position],animationStyles],pointerEvents:\"box-none\"},panResponder.panHandlers,{children:children}));}","map":{"version":3,"names":["React","Animated","Dimensions","useLogger","useGesture","usePanResponder","useSlideAnimation","useViewDimensions","noop","bound","getTestId","styles","jsx","_jsx","dampingFor","gesture","position","moveY","height","screenHeight","get","Math","abs","Error","animatedValueFor","damping","boundValue","val","dy","AnimatedContainer","children","isVisible","topOffset","bottomOffset","keyboardOffset","avoidKeyboard","onHide","onRestorePosition","swipeable","log","panning","computeViewDimensions","animatedValue","animate","animationStyles","disable","onStart","useCallback","current","onEnd","onDismiss","onRestore","computeNewAnimatedValueForGesture","newAnimatedValue","panResponder","useLayoutEffect","newAnimationValue","View","Object","assign","testID","onLayout","style","base","pointerEvents","panHandlers"],"sources":["/Users/siva/Documents/GitHub/streakzilla/streakzilla/node_modules/react-native-toast-message/lib/src/components/AnimatedContainer.js"],"sourcesContent":["import React from 'react';\nimport { Animated, Dimensions } from 'react-native';\nimport { useLogger, useGesture } from '../contexts';\nimport { usePanResponder, useSlideAnimation, useViewDimensions } from '../hooks';\nimport { noop } from '../utils/func';\nimport { bound } from '../utils/number';\nimport { getTestId } from '../utils/test-id';\nimport { styles } from './AnimatedContainer.styles';\n/**\n * Produces a positive damping value.\n *\n * To note: `moveY` becomes negative when going off-screen. By making sure the value\n * produced is always positive, we avoid issues like: https://github.com/calintamas/react-native-toast-message/issues/280\n */\nexport function dampingFor(gesture, position) {\n    const { moveY } = gesture;\n    switch (position) {\n        case 'bottom': {\n            const { height: screenHeight } = Dimensions.get('screen');\n            return Math.abs(screenHeight - moveY);\n        }\n        case 'top':\n            return Math.abs(moveY);\n        default:\n            throw new Error(`Toast position: ${position} not implemented`);\n    }\n}\nexport function animatedValueFor(gesture, position, damping) {\n    const boundValue = (val) => bound(val, 0, 2);\n    const { dy } = gesture;\n    switch (position) {\n        case 'bottom':\n            return boundValue(1 - dy / damping);\n        case 'top':\n            return boundValue(1 + dy / damping);\n        default:\n            throw new Error(`Toast position: ${position} not implemented`);\n    }\n}\nexport function AnimatedContainer({ children, isVisible, position, topOffset, bottomOffset, keyboardOffset, avoidKeyboard, onHide, onRestorePosition = noop, swipeable }) {\n    const { log } = useLogger();\n    const { panning } = useGesture();\n    const { computeViewDimensions, height } = useViewDimensions();\n    const { animatedValue, animate, animationStyles } = useSlideAnimation({\n        position,\n        height,\n        topOffset,\n        bottomOffset,\n        keyboardOffset,\n        avoidKeyboard\n    });\n    const disable = !swipeable || !isVisible;\n    const onStart = React.useCallback(() => {\n        log('Swipe, pan start');\n        panning.current = true;\n    }, [log, panning]);\n    const onEnd = React.useCallback(() => {\n        log('Swipe, pan end');\n        panning.current = false;\n    }, [log, panning]);\n    const onDismiss = React.useCallback(() => {\n        log('Swipe, dismissing');\n        animate(0);\n        onHide();\n    }, [animate, log, onHide]);\n    const onRestore = React.useCallback(() => {\n        log('Swipe, restoring to original position');\n        animate(1);\n        onRestorePosition();\n    }, [animate, log, onRestorePosition]);\n    const computeNewAnimatedValueForGesture = React.useCallback((gesture) => {\n        const damping = dampingFor(gesture, position);\n        const newAnimatedValue = animatedValueFor(gesture, position, damping);\n        return newAnimatedValue;\n    }, [position]);\n    const { panResponder } = usePanResponder({\n        animatedValue,\n        computeNewAnimatedValueForGesture,\n        onDismiss,\n        onRestore,\n        onStart,\n        onEnd,\n        disable,\n    });\n    React.useLayoutEffect(() => {\n        const newAnimationValue = isVisible ? 1 : 0;\n        animate(newAnimationValue);\n    }, [animate, isVisible]);\n    return (<Animated.View testID={getTestId('AnimatedContainer')} onLayout={computeViewDimensions} style={[styles.base, styles[position], animationStyles]} \n    // This container View is never the target of touch events but its subviews can be.\n    // By doing this, tapping buttons behind the Toast is allowed\n    pointerEvents='box-none' {...panResponder.panHandlers}>\n      {children}\n    </Animated.View>);\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}